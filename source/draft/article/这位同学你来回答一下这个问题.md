---
title: 这位同学你来回答一下这个问题
tags: [Frontend]
category: interview
filename: interview questions
createdTime: 2020-02-23 16:14
---
# 在React和Vue中进行列表渲染的时候需要添加key属性，那么key的作用是啥？
1. 为什么需要加key?
对于react和vue，视图更新依赖于虚拟DOM的新旧对比，列表渲染出来的元素，它们往往标签名称相同，而且位于虚拟DOM中的层级也一样，因此虚拟DOM比对的时候无法精确判断是哪个元素发生了变化，通过给列表元素添加唯一的key值，便可以通过key值将元素的前后两种状态关联起来，从而判断是否发生变化.
2. key值有哪些作用？
    * 列表渲染时实现DOM结构的复用，视图更新的过程本质上也是对DOM结构进行增、删、改、查的操作，通过key值，可以更快得在旧的虚拟dom里找到对应节点，如果没有对应的旧节点，那么执行新增节点的操作，如果有，则只是执行节点更新操作，这样就实现了复用从而提升页面的渲染性能，至于剩余的节点，自然就是执行删除操作了.
    * 对于非受控组件，如input，textarea等表单组件，因其自身含有非受控的状态，如果不添加唯一的key值进行标识，某些场景下会发生意想不到的bug.
3. 使用key值需要注意什么？
    * 对于同一个列表渲染，key值必须唯一，不能重复；
    * key值应当不可变，因此不能使用数组索引作为key值，否则就失去了key值带来的作用.

# ['1', '2', '3'].map(parseInt) what & why ?
1. what?
结果应当是`[1, NaN, NaN]`.
2. why?
数组的`map`函数使用方法为`array.map((item, index, array) => { /* some code */ })`, 而parseInt的使用方法为`parseInt(numStr, radix)`, 其中radix参数为当前数字的进制，radix介于0 ～ 36之间，radix默认为10，radix为0相当于radix为10，因此` ['1', '2', '3'].map(parseInt)`的结果就是`[parseInt('1', 0), parseInt('2', 1), parseInt('3', 2)]`, 结果自然为`[1, NaN, NaN]`.